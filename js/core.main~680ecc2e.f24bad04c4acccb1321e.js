(self.webpackChunk=self.webpackChunk||[]).push([[3559],{83902:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(60216),a=n.n(r),c=n(40841),i=n.n(c),o=n(32735),l=n(83118),u=n(65597),s=n(32577),f=n(75672),_=n(20374),m=n(53289),d=n(53151);var y=function(e){var t=e.notifications,n=e.toggleDialog;return o.createElement(o.Fragment,null,t.map((function(e){return o.createElement("div",{className:"notifications-item",key:e.key},o.createElement(u.Text,{as:"h2",className:"notifications-item__title",weight:"bold",size:"xs",line_height:"m",color:"prominent"},e.type&&o.createElement(u.Icon,{icon:["contract_sold","info"].includes(e.type)?"IcAlertInfo":"IcAlert".concat((0,m.toTitleCase)(e.type)),className:i()("notifications-item__title-icon",(t={},r="notifications-item__title-icon--".concat(e.type),a=e.type,r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t))}),e.header),o.createElement("div",{className:"notifications-item__message"},e.message),o.createElement("div",{className:"notifications-item__action"},!(0,m.isEmptyObject)(e.action)&&o.createElement(o.Fragment,null,e.action.route?o.createElement(s.CG,{onClick:n,active_class:"notifications-item",className:i()("dc-btn","dc-btn--secondary","notifications-item__cta-button"),to:e.action.route},o.createElement(u.Text,{weight:"bold",size:"xxs"},e.action.text)):o.createElement(u.Button,{className:i()("dc-btn--secondary","notifications-item__cta-button"),onClick:e.action.onClick},o.createElement(u.Text,{weight:"bold",size:"xxs"},e.action.text)))));var t,r,a})))},p=o.forwardRef((function(e,t){var n=e.notifications,r=e.toggleDialog,a=!n.length;return o.createElement("div",{className:"notifications-dialog",ref:t},o.createElement("div",{className:"notifications-dialog__header"},o.createElement(u.Text,{as:"h2",className:"notifications-dialog__header-text",size:"s",weight:"bold",color:"prominent",styles:{lineHeight:"1.6rem"}},o.createElement(_.Localize,{i18n_default_text:"Notifications"}))),o.createElement("div",{className:i()("notifications-dialog__content",{"notifications-dialog__content--empty":a})},o.createElement(u.ThemedScrollbars,{is_bypassed:(0,m.isMobile)()||a},a?o.createElement(d.X,null):o.createElement(y,{notifications:n,toggleDialog:r}))))}));p.displayName="NotificationListWrapper";var h=function(e){var t=e.is_visible,n=e.notifications,r=e.toggleDialog,a=o.useRef();return(0,u.useOnClickOutside)(a,(function(e){var n,c=!e.target.classList.contains("notifications-toggle__icon-wrapper");null!==(n=a.current)&&void 0!==n&&n.contains(e.target)||!t||!c||r()})),o.createElement(o.Fragment,null,o.createElement(u.MobileWrapper,null,o.createElement(u.MobileDialog,{portal_element_id:"modal_root",title:(0,_.localize)("Notifications"),wrapper_classname:"notifications-mobile-dialog",visible:t,onClose:r},o.createElement(p,{notifications:n,ref:a,toggleDialog:r}))),o.createElement(u.DesktopWrapper,null,o.createElement(l.Z,{in:t,classNames:{enter:"notifications-dialog--enter",enterDone:"notifications-dialog--enter-done",exit:"notifications-dialog--exit"},timeout:150,unmountOnExit:!0},o.createElement(p,{notifications:n,ref:a,toggleDialog:r}))))};h.propTypes={is_visible:a().bool,notifications:a().array,toggleDialog:a().func};const g=(0,f.$j)((function(e){var t=e.ui,n=e.common;return{notifications:t.filtered_notifications,app_routing_history:n.app_routing_history,removeNotificationByKey:t.removeNotificationByKey,removeNotificationMessage:t.removeNotificationMessage}}))(h)},20903:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(32735),a=n(53289);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l="is_dashboard";const u=function(e){var t=o({},e),n=!!window.localStorage.getItem(l)&&"true"===window.localStorage.getItem(l),i=c(r.useState(n),2),u={is_dashboard:i[0],setDerivDashboard:i[1],DERIV_DASHBOARD_KEY:l};return r.createElement(a.PlatformContext.Provider,o({value:u},t))}},76541:(e,t,n)=>{"use strict";n.d(t,{Z:()=>J});var r=n(40841),a=n.n(r),c=n(60216),i=n.n(c),o=n(19465),l=n.n(o),u=n(32735),s=n(65597),f=n(53289),_=n(20374),m=n(75672),d=n(58226),y=n(44066);const p=function(e){var t=e.onConfirm,n=e.onClose;return u.createElement(y.Formik,{initialValues:{},onSubmit:t,validateOnMount:!0},(function(e){var t=e.handleSubmit;return u.createElement(s.AutoHeightWrapper,{default_height:200},(function(e){var r=e.setRef,a=e.height;return u.createElement("form",{ref:r,onSubmit:t,className:"accept-risk__form"},u.createElement(s.Div100vhContainer,{className:"details-form",height_offset:"40px",is_disabled:(0,f.isDesktop)()},u.createElement(s.ThemedScrollbars,{autoHide:!(window.innerHeight<890),height:a-77},u.createElement("div",{className:"accept-risk__container"},u.createElement("div",{className:"accept-risk__header"},u.createElement(s.Text,{weight:"bold",size:"xs"},(0,_.localize)("Appropriateness Test, WARNING:"))),u.createElement(s.Text,{as:"p",size:"xs"},u.createElement(_.Localize,{i18n_default_text:"In providing our services to you, we are required to obtain information from you in order to assess whether a given product or service is appropriate for you (that is, whether you possess the experience and knowledge to understand the risks involved).<0/><1/>",components:[u.createElement("br",{key:0}),u.createElement("br",{key:1})]}),u.createElement(_.Localize,{i18n_default_text:"On the basis of the information provided in relation to your knowledge and experience, we consider that the investments available via this website are not appropriate for you.<0/><1/>",components:[u.createElement("br",{key:0}),u.createElement("br",{key:1})]}),u.createElement(_.Localize,{i18n_default_text:"By clicking Accept below and proceeding with the Account Opening you should note that you may be exposing yourself to risks (which may be significant, including the risk of loss of the entire sum invested) that you may not have the knowledge and experience to properly assess or mitigate."}))))),u.createElement(s.Modal.Footer,{has_separator:!0,is_bypassed:(0,f.isMobile)()},u.createElement(s.FormSubmitButton,{is_absolute:(0,f.isMobile)(),label:(0,_.localize)("Accept"),has_cancel:!0,cancel_label:(0,_.localize)("Decline"),onCancel:n})))}))}))};var h=n(78247),g=n.n(h),b=n(86245),v=n.n(b),E=n(80046),w=n.n(E),S=n(71711),x=n.n(S),C=n(7335),z=n.n(C),A=n(1537),N=n.n(A),O=n(39979),k=n.n(O),j=n(24846),L=n(26677),T=n(67027),D=n.n(T);const F=(0,m.$j)((function(e){var t=e.client;return{is_gb_residence:"gb"===t.residence,fetchStatesList:t.fetchStatesList,states_list:t.states_list}}))(D());function I(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=function(e){return"samoa"!==e.real_account_signup_target},R=function(e){return[].concat(I(M(e)?[g()(e,j.Z)]:[]),I(M(e)?[v()(e,N())]:[]),I(M(e)?[w()(e,F)]:[]),I("maltainvest"===e.real_account_signup_target?[z()(e,L.Z)]:[]),[x()(e,k())])};function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e,t,n,r,a,c,i){try{var o=e[c](i),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,a)}function H(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw c}}return n}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var K=function(e){var t=e.has_target,n=e.has_real_account,r=e.has_currency,a=e.items,c=e.getCurrentStep,i=e.getTotalSteps,o=c()-1,l=a[o].header.title;return u.createElement(u.Fragment,null,(!n||t)&&r&&u.createElement(u.Fragment,null,u.createElement(s.DesktopWrapper,null,u.createElement(s.FormProgress,{steps:a,current_step:o})),u.createElement(s.MobileWrapper,null,u.createElement("div",{className:"account-wizard__header-steps"},u.createElement(s.Text,{as:"h4",styles:{lineHeight:"20px",color:"var(--brand-red-coral)"},size:"xs",weight:"bold",className:"account-wizard__header-steps-title"},u.createElement(_.Localize,{i18n_default_text:"Step {{step}}: {{step_title}} ({{step}} of {{steps}})",values:{step:o+1,steps:i(),step_title:l}}))))),u.createElement(s.DesktopWrapper,null,n&&(!t||!r)&&u.createElement("div",{className:"account-wizard__set-currency"},!r&&u.createElement("p",null,u.createElement(_.Localize,{i18n_default_text:"You have an account that do not have currency assigned. Please choose a currency to trade with this account."})),u.createElement(s.Text,{as:"h2",weight:"bold",align:"center"},u.createElement(_.Localize,{i18n_default_text:"Please choose your currency"})))))},G=function(e){var t=U(u.useState(void 0),1)[0],n=U(u.useState(!1),2),r=n[0],c=n[1],i=U(u.useState(""),2),o=i[0],_=i[1],m=U(u.useState([]),2),y=m[0],h=m[1],g=U(u.useState([]),2),b=g[0],v=g[1],E=U(u.useState(!1),2),w=E[0],S=E[1],x=u.useRef(!1);u.useEffect((function(){e.fetchStatesList();var t=(0,f.makeCancellablePromise)(e.fetchResidenceList()),n=t.cancel,r=t.promise,a=(0,f.makeCancellablePromise)(e.fetchFinancialAssessment()),i=a.cancel,o=a.promise;return Promise.all([r,o]).then((function(){v((function(t){return t.length?t:R(e)})),h(C()),c(!0)})),function(){n(),i()}}),[]),u.useEffect((function(){if(y.length>0){var e=H(b);y.forEach((function(t,n){t instanceof Object&&(e[n].form_value=t)})),v(e),h([])}}),[y]),u.useEffect((function(){if(e.residence_list.length){z(e.residence_list).then((function(t){var n,r;(r=b.length?b:R(e)).length>1&&"phone"in(null===(n=r[1])||void 0===n?void 0:n.form_value)&&(r[1].form_value.phone=r[1].form_value.phone||t||"",v(r))}))}}),[e.residence_list]);var C=function(){var e=localStorage.getItem("real_account_signup_wizard");try{return JSON.parse(e)||[]}catch(e){return[]}finally{localStorage.removeItem("real_account_signup_wizard")}},z=function(){var t,n=(t=regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=n.find((function(t){return t.value===e.residence})))&&r.phone_idd){t.next=3;break}return t.abrupt("return","");case 3:return t.abrupt("return","+".concat(r.phone_idd));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var c=t.apply(e,n);function i(e){B(c,r,a,i,o,"next",e)}function o(e){B(c,r,a,i,o,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}(),A=function(){return b.map((function(e){return e.form_value})).reduce((function(t,n){var r=l()(new Map(Object.entries(n)));return r.date_of_birth&&(r.date_of_birth=(0,f.toMoment)(r.date_of_birth).format("YYYY-MM-DD")),r.place_of_birth&&(r.place_of_birth=r.place_of_birth?(0,f.getLocation)(e.residence_list,r.place_of_birth,"value"):""),r.citizen&&(r.citizen=r.citizen?(0,f.getLocation)(e.residence_list,r.citizen,"value"):""),r.tax_residence&&(r.tax_residence=r.tax_residence?(0,f.getLocation)(e.residence_list,r.tax_residence,"value"):r.tax_residence),Y(Y({},t),r)}))},N=function(){_("")},O=function(t,n){t-1<0?e.onClose():(n(),N())},k=function(t,n,r,a){j(t,n),N(),!e.has_currency&&e.has_real_account||t+1>=b.length?T(r):a()},j=function(e,t){var n=Object.assign([],b);n[e].form_value=t,v(n)},L=function(e,t){return e?b[t][e]:b[t]},T=function(t){var n;e.setLoading(!0),e.has_real_account&&!e.has_currency?e.setAccountCurrency(A().currency).then((function(t){e.onFinishSuccess(t.echo_req.set_account_currency.toLowerCase())})).catch((function(e){_(e),t(!1)})).finally((function(){return e.setLoading(!1)})):(n=Y({},A()),null==n||delete n.tax_identification_confirm,x.current&&(n.accept_risk=1),e.realAccountSignup(n)).then((function(t){"maltainvest"===e.real_account_signup_target?e.onFinishSuccess(t.new_account_maltainvest.currency.toLowerCase()):"samoa"===e.real_account_signup_target?e.onOpenWelcomeModal(t.new_account_samoa.currency.toLowerCase()):e.onFinishSuccess(t.new_account_real.currency.toLowerCase())})).catch((function(t){"show risk disclaimer"===t.code?S(!0):e.onError(t,b)})).finally((function(){return e.setLoading(!1)}))};if(e.is_loading)return u.createElement(d.Z,null);if(w)return u.createElement(p,{onConfirm:function(){x.current=!0,T()},onClose:e.onClose});if(!r)return null;if(!t){var D=b.map((function(t,n){var r=function(t){var n=L("passthrough",t),r=L("props",t)||{};return n&&n.length&&(n.forEach((function(t){Object.assign(r,Z({},t,e[t]))})),r.bypass_to_personal=y.length>0),r}(n),a=t.body;return u.createElement(a,W({value:L("form_value",n),index:n,onSubmit:k,onCancel:O,onSave:j,has_currency:e.has_currency,form_error:o},r,{key:n}))})),F=u.createElement("div",null);return"samoa"!==e.real_account_signup_target&&(F=u.createElement(K,{has_real_account:e.has_real_account,items:b,has_currency:e.has_currency,has_target:"manage"!==e.real_account_signup_target})),u.createElement(s.Wizard,{nav:F,className:a()("account-wizard",{"account-wizard--set-currency":!e.has_currency,"account-wizard--deriv-crypto":"samoa"===e.real_account_signup_target})},D)}var I=t;return u.createElement(I,null)};G.propTypes={fetchResidenceList:i().func,has_currency:i().bool,has_real_account:i().bool,onError:i().func,onLoading:i().func,onFinishSuccess:i().func,onOpenWelcomeModal:i().func,realAccountSignup:i().func,residence:i().string,residence_list:i().array,setAccountCurrency:i().func};const J=(0,m.$j)((function(e){var t=e.client,n=e.ui;return{account_settings:t.account_settings,is_fully_authenticated:t.is_fully_authenticated,realAccountSignup:t.realAccountSignup,has_real_account:t.has_active_real_account,upgrade_info:t.upgrade_info,real_account_signup_target:n.real_account_signup_target,has_currency:!!t.currency,setAccountCurrency:t.setAccountCurrency,residence:t.residence,residence_list:t.residence_list,states_list:t.states_list,fetchStatesList:t.fetchStatesList,fetchResidenceList:t.fetchResidenceList,refreshNotifications:t.refreshNotifications,fetchFinancialAssessment:t.fetchFinancialAssessment,needs_financial_assessment:t.needs_financial_assessment,financial_assessment:t.financial_assessment}}))(G)},17819:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var r=n(40841),a=n.n(r),c=n(60216),i=n.n(c),o=n(32735),l=n(65597),u=n(20374),s=n(53289),f=n(58468),_=n(75672),m=n(44066),d=n(75594),y=n.n(d),p=n(71857),h=n.n(p),g=function(){return[o.createElement(u.Localize,{key:0,i18n_default_text:"Choose your preferred cryptocurrency"}),o.createElement(u.Localize,{key:1,i18n_default_text:"You can open an account for each cryptocurrency."}),o.createElement(u.Localize,{key:2,i18n_default_text:"Add a real account"}),o.createElement(u.Localize,{key:3,i18n_default_text:"Choose a currency you would like to trade with."})]},b=function(e){var t=e.heading,n=e.subheading;return o.createElement(o.Fragment,null,o.createElement(l.Text,{as:"h1",color:"prominent",align:"center",weight:"bold",className:"add-crypto-currency__title"},t),o.createElement(l.Text,{as:"h3",size:"xxs",color:"prominent",align:"center",className:"add-crypto-currency__sub-title"},n))},v="crypto",E=function(e){var t=e.available_crypto_currencies,n=e.form_error,r=e.has_fiat,a=e.legal_allowed_currencies,c=e.onSubmit,i=e.should_show_crypto_only,f=e.should_show_fiat_only,_=e.value,d=e.hasNoAvailableCrypto,p=function(){return(0,s.reorderCurrencies)(a.filter((function(e){return"fiat"===e.type})))},E=function(){return(0,s.reorderCurrencies)(a.filter((function(e){return e.type===v})),v)},w=function(){return!r&&!i},S=function(e){return-1===t.map((function(e){return e.value})).indexOf(e.value)};return o.createElement(m.Formik,{initialValues:{currency:_.currency},onSubmit:function(e,t){c(!1,e,t.setSubmitting)}},(function(e){var r=e.handleSubmit,a=e.values,c=e.errors,i=e.touched,_=e.isSubmitting;return o.createElement("form",{onSubmit:r},!w()&&o.createElement(b,{heading:g()[0],subheading:g()[1]}),w()&&o.createElement(b,{heading:g()[2],subheading:g()[3]}),w()&&o.createElement(o.Fragment,null,o.createElement(y(),{id:"fiat_currency",is_fiat:!0,className:"currency-selector__radio-group currency-selector__radio-group--with-margin",value:a.currency,error:c.currency,touched:i.currency,is_title_enabled:w(),item_count:p().length},p().map((function(e){return o.createElement(m.Field,{key:e.value,component:h(),name:"currency",id:e.value,label:e.name})})))),w()&&o.createElement(l.Text,{as:"p",color:"prominent",size:"xxs",align:"center",className:"currency-selector__deposit-warn"},o.createElement(u.Localize,{i18n_default_text:"You’ll not be able to change currency once you have made a deposit."})),d()&&o.createElement("div",{className:"account-wizard--disabled-message"},o.createElement(l.Text,{as:"p",align:"center",size:"xxs",className:"account-wizard--disabled-message-description"},(0,u.localize)("You already have an account for each of the cryptocurrencies available on {{deriv}}.",{deriv:s.website_name}))),!f&&(0!==t.length?o.createElement(y(),{id:"crypto_currency",className:"currency-selector__radio-group currency-selector__radio-group--with-margin",label:(0,u.localize)("Cryptocurrencies"),value:a.currency,error:c.currency,touched:i.currency,is_title_enabled:w(),item_count:E().length},E().map((function(e){return o.createElement(m.Field,{key:e.value,component:h(),name:"currency",id:e.value,label:e.name,selected:S(e)})}))):o.createElement(y(),{id:"crypto_currency",className:"currency-selector__radio-group currency-selector__radio-group--with-margin",label:(0,u.localize)("Cryptocurrencies"),is_title_enabled:w(),item_count:E().length},E().map((function(e){return o.createElement(m.Field,{key:e.value,component:h(),name:"currency",id:e.value,label:e.name,selected:!0})})))),o.createElement(l.FormSubmitButton,{className:"currency-selector__button",is_disabled:_||!a.currency,label:(0,u.localize)("Add account"),is_absolute:!(0,s.isMobile)(),form_error:n}))}))};E.propTypes={available_crypto_currencies:i().array,legal_allowed_currencies:i().array,has_fiat:i().bool,hasNoAvailableCrypto:i().func,form_error:i().string,onSubmit:i().func,should_show_crypto_only:i().bool,should_show_fiat_only:i().bool,value:i().shape({crypto:i().string,fiat:i().string})};const w=(0,_.$j)((function(e){var t=e.client;return{available_crypto_currencies:t.available_crypto_currencies,legal_allowed_currencies:t.upgradeable_currencies,has_fiat:t.has_fiat}}))(E);var S=function(e){var t,n=e.legal_allowed_currencies,r=e.value,a=e.onSubmit,c=e.form_error,i=e.can_change_fiat_currency,f=e.client_currency,_=e.current_currency_type,d=e.current_fiat_currency,p=function(){return(0,s.reorderCurrencies)(n.filter((function(e){return"fiat"===e.type})))},g="fiat"===_,b=o.createElement(u.Localize,{i18n_default_text:"We can't change your account currency as you've either made a deposit into your {{currency}} account or created a real account on DMT5.",values:{currency:(0,s.getCurrencyDisplayCode)(f)}}),v=o.createElement(u.Localize,{i18n_default_text:"Please switch to your {{fiat_currency}} account to change currencies.",values:{fiat_currency:null==d||null===(t=d.toUpperCase)||void 0===t?void 0:t.call(d)}}),E=g?b:v;return o.createElement(m.Formik,{initialValues:{fiat:r.fiat},onSubmit:function(e,t){a(!1,e,t.setSubmitting)}},(function(e){var t=e.handleSubmit,n=e.values,r=e.errors,a=e.touched,_=e.isSubmitting;return o.createElement("form",{onSubmit:function(e){e.preventDefault(),t()}},o.createElement(l.Text,{as:"h1",color:"prominent",weight:"bold",align:"center",className:"change-currency__title"},o.createElement(u.Localize,{i18n_default_text:"Change your currency"})),o.createElement(l.Text,{as:"h3",size:"xxs",align:"center",className:"change-currency__sub-title"},o.createElement(u.Localize,{i18n_default_text:"Choose the currency you would like to trade with."})),!i&&o.createElement("div",{className:"account-wizard--disabled-message"},o.createElement(l.Text,{as:"p",align:"center",size:"xxs",className:"account-wizard--disabled-message-description"},E)),o.createElement(y(),{id:"fiat",label:(0,u.localize)("Cryptocurrencies"),className:"currency-selector__radio-group currency-selector__radio-group--with-margin",value:n.fiat,error:r.fiat,touched:a.fiat,is_title_enabled:!1,item_count:p().length},p().map((function(e){return o.createElement(m.Field,{key:e.value,component:h(),name:"fiat",id:e.value,label:e.name,selected:e.value===f})}))),o.createElement(l.FormSubmitButton,{className:"change-currency__button",is_disabled:_||!n.fiat,label:(0,u.localize)("Change currency"),is_absolute:!(0,s.isMobile)(),form_error:c}))}))};S.propTypes={legal_allowed_currencies:i().array,onSubmit:i().func,value:i().shape({crypto:i().string,fiat:i().string}),form_error:i().string,can_change_fiat_currency:i().bool,currency:i().string,current_currency_type:i().string,current_fiat_currency:i().string,client_currency:i().string};const x=(0,_.$j)((function(e){var t=e.client;return{legal_allowed_currencies:t.upgradeable_currencies,client_currency:t.currency,current_fiat_currency:t.current_fiat_currency}}))(S);var C=n(58226);function z(e,t,n,r,a,c,i){try{var o=e[c](i),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(r,a)}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,c=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,c=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw c}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O=function(e){var t=e.available_crypto_currencies,n=e.can_change_fiat_currency,r=e.createCryptoAccount,c=e.current_currency_type,i=e.has_fiat,_=e.is_eu,m=e.is_loading,d=e.manage_real_account_tab_index,y=e.onError,p=e.onSuccessSetAccountCurrency,h=e.setCurrency,g=e.setLoading,b=(null!=d?d:i&&0===(null==t?void 0:t.length))?1:0,v=A(o.useState(b),2),E=v[0],S=v[1],N=A(o.useState(""),1)[0],O=A(o.useState({crypto:"",fiat:""}),1)[0];o.useEffect((function(){(function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,f.WS.mt5LoginList();case 3:g(!1);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function i(e){z(c,r,a,i,o,"next",e)}function o(e){z(c,r,a,i,o,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}})()()}),[]);var k=function(e,t,n){!function(e,t){g(!0),Object.entries(e).map((function(e){var n=A(e,2),a=n[0],c=n[1];"fiat"===a?h(c).then((function(e){t(!1),p(e.passthrough.previous_currency,e.echo_req.set_account_currency)})).catch((function(e){y(e)})).finally((function(){return g(!1)})):r(c).then((function(){p("",c),t(!1)})).catch((function(e){y(e)})).finally((function(){return g(!1)}))}))}(t,n)},j=function(){return 0===t.length&&i};if(m)return o.createElement(C.Z,null);var L=i&&o.createElement("div",{className:a()("change-currency",{"account-wizard--disabled":!n})},o.createElement(x,{className:"account-wizard__body",onSubmit:k,value:O,form_error:N,can_change_fiat_currency:n,current_currency_type:c}));return o.createElement(l.ThemedScrollbars,{is_bypassed:(0,s.isMobile)(),autohide:!1},_&&i?L:o.createElement(l.Tabs,{active_index:E,className:"account-wizard add-or-manage tabs--desktop",onTabItemClick:function(e){S(e)},top:!0,header_fit_content:(0,s.isDesktop)()},o.createElement("div",{label:(0,u.localize)("Cryptocurrencies")},o.createElement("div",{className:a()("add-crypto-currency",{"account-wizard--disabled":j()})},o.createElement(w,{className:"account-wizard__body",onSubmit:k,value:O,form_error:N,should_show_crypto_only:!0,hasNoAvailableCrypto:j}))),o.createElement("div",{label:(0,u.localize)("Fiat currencies")},i?L:o.createElement(w,{className:"account-wizard__body",onSubmit:k,value:O,form_error:N,should_show_fiat_only:!0,hasNoAvailableCrypto:j}))))};O.propTypes={available_crypto_currencies:i().arrayOf({fractional_digits:i().number,is_deposit_suspended:i().number,is_suspended:i().number,is_withdrawal_suspended:i().number,name:i().string,stake_default:i().number,transfer_between_accounts:i().object,type:i().string,value:i().string}),onError:i().func,onLoading:i().func,onSuccessSetAccountCurrency:i().func,is_eu:i().bool,setCurrency:i().func,createCryptoAccount:i().func,has_fiat:i().bool,can_change_fiat_currency:i().bool,current_currency_type:i().string,is_loading:i().bool,setLoading:i().func};const k=(0,_.$j)((function(e){var t=e.client,n=e.ui;return{available_crypto_currencies:t.available_crypto_currencies,can_change_fiat_currency:t.can_change_fiat_currency,current_currency_type:t.current_currency_type,current_fiat_currency:t.current_fiat_currency,has_fiat:t.has_fiat,is_eu:t.is_eu,manage_real_account_tab_index:n.manage_real_account_tab_index,setCurrency:t.setAccountCurrency,createCryptoAccount:t.createCryptoAccount}}))(O)}}]);